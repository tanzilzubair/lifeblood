/// This changes the header, which includes the name and socials, 
/// from white to black once a distance equal to the viewport 
/// ($(window).height()), since the pages are white, and the header
/// would be invisible then. 
/// This is only needed and is only triggered when in an article page
function changeHeaderColor() {
    var pageName = $(".barba-container").attr("data-namespace");
    $(window).on("scroll", function () {
        if ("home" !== pageName && $(window).scrollTop() > $(window).height()) {
            $("header").addClass("js-color");
            $(".back-arrow").addClass("js-color");
        } else {
            $("header").removeClass("js-color");
            $(".back-arrow").removeClass("js-color");
        }
    })
}
$(window).on("load", function () {
    anime.timeline().add({
        targets: ".loader",
        translateY: [0, "-100%"],
        translateZ: 0,
        easing: "easeInOutCubic",
        duration: 800,
        complete: function () {
            $(".loader").addClass(".js-hidden")
        }
    }).add({
        targets: ".js-moon",
        translateX: ["100%", 0],
        translateZ: 0,
        opacity: [0, 1],
        easing: "easeOutCubic",
        duration: 800,
        delay: function (el, i) {
            return 500 + 50 * i
        },
        offset: "-=1000"
    }).add({
        targets: ".active .js-letter",
        translateX: ["-105%", 0],
        translateZ: 0,
        easing: "easeInOutCubic",
        duration: 800,
        delay: function (el, i) {
            return 50 * i
        },
        offset: "-=1200"
    });
});

var $win = $(window);
var fpnav = {};
var image = {};
var imageBig = {};
var isSp = false;
$win.on("load resize", function () {
    isSp = true;
    fpnav = {
        y: "100%",
        x: 0
    };
    image = {
        width: "80%",
        height: "55.633%",
        top: "9.859%",
        marginRight: "10%",
        marginLeft: "10%"
    };
    imageBig = {
        width: "100%",
        height: "65.492%",
        marginLeft: 0,
        top: 0
    };

    if (window.matchMedia("(min-width: 801px)").matches) {
        isSp = false; fpnav = {
            y: 0,
            x: "-100%"
        }; image = {
            width: "53.125%",
            height: "74.81%",
            top: "auto",
            marginRight: "8%",
            marginLeft: "auto"
        }; imageBig = {
            width: "60.677%",
            height: "100vh",
            marginLeft: "auto",
            top: "auto"
        };
    } else {
        window.matchMedia("(min-width: 421px)").matches && (isSp = false, fpnav = {
            y: "100%",
            x: 0
        }, image = {
            width: "53.125%",
            height: "74.81%",
            marginRight: 40,
            marginLeft: "auto"
        }, imageBig = {
            width: "60.677%",
            height: "100vh",
            top: "auto",
            marginLeft: "auto"
        });
    }
})

/// Setting up the custom scrolling and the scroll animations
setupScrollingAndScrollAnimations();

/// Setting up the menu
setupMenu();
